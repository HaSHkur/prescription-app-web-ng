<div class="flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-blue-100">
    <mat-card class="w-full max-w-md">
        <div class="bg-gradient-to-r from-blue-600 to-blue-800 px-6 py-6 text-center">
        <h1 class="text-white text-2xl font-bold">Register</h1>
        <p class="text-blue-100 text-sm mt-1">Prescription Management System</p>
        </div>

        <mat-card-content class="p-6">
            <div *ngIf="error" class="mb-4 p-4 bg-red-50 border border-red-200 rounded-lg">
                <p class="text-red-700 text-sm">{{ error }}</p>
            </div>

            <div *ngIf="success" class="mb-4 p-4 bg-green-50 border border-green-200 rounded-lg">
                <p class="text-green-700 text-sm">{{ success }}</p>
            </div>

            <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="space-y-6">
                <mat-form-field appearance="fill" class="w-full block">
                <mat-label>Username</mat-label>
                <input matInput formControlName="username" placeholder="Choose a username" />
                <mat-icon matPrefix>person</mat-icon>
                <mat-error *ngIf="submitted && f['username'].errors">
                    <span *ngIf="f['username'].errors['required']">Username is required</span>
                    <span *ngIf="f['username'].errors['minlength']">Username must be at least 3 characters</span>
                </mat-error>
                </mat-form-field>

                <mat-form-field appearance="fill" class="w-full block">
                <mat-label>Role</mat-label>
                <mat-select formControlName="role" placeholder="Select your role">
                    <mat-option *ngFor="let role of roleSelectItems" [value]="role.value">
                    {{ role.label }}
                    </mat-option>
                </mat-select>
                <mat-icon matPrefix>security</mat-icon>
                <mat-error *ngIf="submitted && f['role'].errors">
                    <span *ngIf="f['role'].errors['required']">Role is required</span>
                </mat-error>
                </mat-form-field>

                <mat-form-field appearance="fill" class="w-full block">
                <mat-label>Password</mat-label>
                <input matInput type="password" formControlName="password" placeholder="At least 6 characters" />
                <mat-icon matPrefix>lock</mat-icon>
                <mat-error *ngIf="submitted && f['password'].errors">
                    <span *ngIf="f['password'].errors['required']">Password is required</span>
                    <span *ngIf="f['password'].errors['minlength']">Password must be at least 6 characters</span>
                </mat-error>
                </mat-form-field>

                <mat-form-field appearance="fill" class="w-full block">
                <mat-label>Confirm Password</mat-label>
                <input matInput type="password" formControlName="confirmPassword" placeholder="Re-enter your password" />
                <mat-icon matPrefix>lock</mat-icon>
                <mat-error *ngIf="submitted && (f['confirmPassword'].errors || registerForm.errors?.['passwordMismatch'])">
                    <span *ngIf="f['confirmPassword'].errors?.['required']">Please confirm your password</span>
                    <span *ngIf="registerForm.errors?.['passwordMismatch']">Passwords do not match</span>
                </mat-error>
                </mat-form-field>

                <button mat-raised-button color="primary" class="w-full py-2 mt-4" type="submit" [disabled]="loading">
                <ng-container *ngIf="!loading">Create Account</ng-container>
                <ng-container *ngIf="loading">
                    <mat-progress-spinner [diameter]="20" mode="indeterminate"></mat-progress-spinner>
                </ng-container>
                </button>
            </form>

            <p class="text-center text-gray-600 text-sm mt-6">
                Already have an account?
                <a routerLink="/login" class="text-blue-600 hover:text-blue-800 font-semibold">Sign in here</a>
            </p>
        </mat-card-content>
  </mat-card>
</div>
